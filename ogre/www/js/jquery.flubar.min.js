(function(b){b.flubar={};b.flubar.options={position:"top",timer:5E3,close_button:false,close_onclick:true,close_ontimer:true,fade_in_timer:250,fade_out_timer:750,type:"notification"};b.flubar.show=function(d,e){try{return f.show(d,e||{})}catch(a){var c="Flubar error: "+a;typeof console!="undefined"&&console.error?console.error(c,e):alert(c)}};var f={self:this,wrapper:'<div class="flubar" aria-live="assertive" aria-channel="notify"></div>',stackMessage:null,stackTimeout:null,_is_init:false,show:function(d, e){if(!this._is_init){this._init();this._is_init=true}var a=b.extend({},b.flubar.options,e),c=b(this.wrapper).html(d).hide();a.type&&typeof a.type==="string"&&c.addClass(a.type);a.position=="bottom"?c.appendTo("body").addClass("bottom").fadeIn(a.fade_in_timer):c.prependTo("body").addClass("top").fadeIn(a.fade_in_timer);if(!self.stackMessage)self.stackMessage=[];self.stackMessage.push(c);if(a.close_ontimer==true){c=window.setTimeout(function(){f.hide(a.fade_out_timer)},a.timer);if(!self.stackTimeout)self.stackTimeout= [];self.stackTimeout.push(c)}},hide:function(d){d||(d=0);self.stackMessage.shift().fadeOut(d,function(){b(this).remove();clearTimeout(self.stackTimeout.shift())})},_init:function(){b.flubar.options.close_onclick==true&&b(".flubar").live("click",function(){f.hide()})}}})(jQuery);